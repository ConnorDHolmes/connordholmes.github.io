"use strict";class EasableTrait{constructor(e,t=null){this.target=e,this.eased=e,this.easing=t}get isActive(){return Math.abs(this.target-this.eased)>.01}ease(){this.isActive&&(this.eased+=(this.target-this.eased)*(this.easing*mult))}easeDyn(){this.isActive&&(this.eased+=(this.target-this.eased)*(rm.dynamicEase*mult))}snap(){this.eased=this.target}}const vw={w:window.innerWidth,h:window.innerHeight,hMult:1/window.innerWidth,vMult:1/window.innerHeight,midX:.5*window.innerWidth,midY:.5*window.innerWidth,measure(){this.w=window.innerWidth,this.h=window.innerHeight,this.hMult=1/window.innerWidth,this.vMult=1/window.innerHeight,this.midX=.5*this.w,this.midY=.5*this.h}},scn={el:document.querySelector("c-scene"),scale(){this.h=this.el.offsetHeight,this.el.style.transform=`scale(${vw.h/this.el.offsetHeight})`}},rm={el:document.querySelector("c-room"),mode:0,modes:[{hRange:6,vRange:4,zoom:-768,adj:90,rangeEasing:.01},{hRange:190,vRange:100,zoom:512,adj:0,rangeEasing:.04},{hRange:2,vRange:2,zoom:576,adj:0,rangeEasing:.04},],rangeEasing:new EasableTrait(.005,.01),hRange:new EasableTrait(6),vRange:new EasableTrait(4),zoom:new EasableTrait(-768),adj:new EasableTrait(90),x:new EasableTrait(vw.midX,.15),y:new EasableTrait(vw.midY,.15),get dynamicEase(){return this.rangeEasing.eased},get pan(){return -.5*this.hRange.eased+this.x.eased*vw.hMult*this.hRange.eased+this.adj.eased},get tilt(){return .5*this.vRange.eased-this.y.eased*vw.vMult*this.vRange.eased},setMode(e){this.rangeEasing.target=this.modes[e].rangeEasing,this.hRange.target=this.modes[e].hRange,this.vRange.target=this.modes[e].vRange,this.zoom.target=this.modes[e].zoom,this.adj.target=this.modes[e].adj,this.mode=e},update(){this.el.style.transform=`translate3d(0, 0, ${this.zoom.eased}px) rotate3d(1, 0, 0, ${this.tilt}deg) rotate3d(0, 1, 0, ${this.pan}deg)`},easeTraits(){this.x.ease(),this.y.ease(),this.rangeEasing.ease(),this.hRange.easeDyn(),this.vRange.easeDyn(),this.zoom.easeDyn(),this.adj.easeDyn()}},crs={el:document.querySelector("c-cursor"),x:new EasableTrait(vw.midX,.25),y:new EasableTrait(vw.midY,.25),hf:null,isHidden:!1,measure(){this.hf=.5*this.el.offsetWidth},update(){this.el.style.transform=`translate3d(${this.x.eased-this.hf}px, ${this.y.eased-this.hf}px, 0)`},hide(){this.isHidden=!0,addCl(this.el,"hide")},show(){this.isHidden=!1,remCl(this.el,"hide")},default(){remCl(this.el,"can-click")},canClick(){addCl(this.el,"can-click")},easeTraits(){this.x.ease(),this.y.ease()}},root=document.documentElement,body=document.body,nav=document.querySelector("nav"),startButton=document.getElementById("start"),email=document.querySelector("footer span"),resButton=document.getElementById("res"),hiddenKey=document.querySelector("c-control.hide"),hoverables=[...document.querySelectorAll("[data-h]")],list=document.querySelector("ul"),listEntries=list.querySelectorAll("li"),entryCount=listEntries.length,listPairs=new Map;let canScroll=!1;const frameDurationMultiplier=1/(1e3/60);let then=performance.now(),everyOtherFrame,mult=1;const actions=new Map([[startButton,()=>{addCl(nav,"hide"),setTimeout(()=>{rm.setMode(2),remCl(hiddenKey,"hide"),remCl(rm.el,"backface"),addCl(nav,"remove"),[...listPairs.keys()].forEach((e,t)=>setTimeout(()=>remCl(e,"hide"),(t+20)*125)),canScroll=!0},350)},],[resButton,()=>window.open("resume_placeholder.pdf","_blank")],]);function addCl(e,t){e.classList.contains(t)||requestAnimationFrame(()=>e.classList.add(t))}function remCl(e,t){e.classList.contains(t)&&requestAnimationFrame(()=>e.classList.remove(t))}function togCl(e,t){requestAnimationFrame(()=>e.classList.toggle(t))}function bindLinks(){document.querySelectorAll("a").forEach(e=>{let t=e.href;actions.set(e,()=>window.open(t,"_blank")),e.removeAttribute("href"),e.removeAttribute("target")})}function detectSafari(){navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")&&body.classList.add("safari-compat")}function cloneListEntries(){let e=document.querySelectorAll("section");listEntries.forEach((t,s)=>{let a=t.cloneNode(!0);listPairs.set(t,a).set(a,t),hoverables.push(a),actions.set(t,()=>{e.forEach((e,t)=>t===s?togCl(e,"show"):remCl(e,"show")),[...listPairs.keys()].forEach(e=>e===t||e===a?togCl(e,"selected"):remCl(e,"selected"))}).set(a,()=>{e.forEach((e,t)=>t===s+entryCount?togCl(e,"show"):remCl(e,"show")),[...listPairs.keys()].forEach(e=>e===t||e===a?togCl(e,"selected"):remCl(e,"selected"))}),list.append(a)})}function cloneScreen(){let e=document.querySelector("c-screen"),t=e.cloneNode(!0),s=new Map,a=new MutationObserver(e=>e.forEach(e=>s.get(e.target).classList=e.target.classList)),r=[...t.querySelectorAll("[data-m], [data-h]"),];r.forEach(e=>["data-m","data-h"].forEach(t=>e.removeAttribute(t))),[...e.querySelectorAll("[data-m], [data-h]")].forEach((e,t)=>{s.set(e,r[t]),a.observe(e,{attributeFilter:["class"]})});let i=s.get(list);i.scrollTop=list.scrollTop=1;let n=(listEntries[0].offsetHeight+parseInt(getComputedStyle(list).getPropertyValue("--gap").split("p")[0]))*entryCount;document.addEventListener("wheel",e=>{canScroll&&(list.scrollTop>=n?i.scrollTop=list.scrollTop=1:0===list.scrollTop?i.scrollTop=list.scrollTop=n-1:i.scrollTop=list.scrollTop+=e.deltaY)},{passive:!0}),document.querySelector("c-reflection").append(t)}function updateHoveredEl(){let e=document.elementFromPoint(crs.x.eased,crs.y.eased);hoverables.includes(e)?(hoverables.forEach(t=>t===e||t===listPairs.get(e)?addCl(t,"hov"):remCl(t,"hov")),crs.canClick()):(hoverables.forEach(e=>remCl(e,"hov")),crs.default())}function returningToTab(){crs.x.target=crs.x.eased=rm.x.eased=vw.midX,crs.y.target=crs.y.eased=rm.y.eased=vw.midY,hoverables.forEach(e=>remCl(e,"hov")),crs.default(),crs.hide()}function step(e){rm.update(),crs.update(),mult=(e-then)*frameDurationMultiplier,rm.easeTraits(),crs.easeTraits(),everyOtherFrame&&!crs.isHidden&&updateHoveredEl(),everyOtherFrame=!everyOtherFrame,then=e,requestAnimationFrame(step)}function measureAndSize(){crs.measure(),vw.measure(),scn.scale(),resetView()}function resetView(){crs.x.target=rm.x.target=vw.midX,crs.y.target=rm.y.target=vw.midY,crs.hide()}function removeSelection(){window.getSelection&&window.getSelection().removeAllRanges(),document.selection&&document.selection.empty()}window.addEventListener("resize",measureAndSize),window.addEventListener("blur",returningToTab),root.addEventListener("blur",returningToTab),document.addEventListener("blur",returningToTab),window.addEventListener("visibilitychange",returningToTab),document.addEventListener("focus",returningToTab),document.addEventListener("mousemove",e=>{crs.x.target=rm.x.target=e.pageX,crs.y.target=rm.y.target=e.pageY,crs.show()}),root.addEventListener("mouseleave",resetView),root.addEventListener("mouseenter",e=>{crs.x.target=crs.x.eased=e.pageX,crs.x.target=crs.y.eased=e.pageY}),document.addEventListener("keyup",e=>{"Shift"===e.key?0!==rm.mode&&(1===rm.mode?rm.setMode(2):rm.setMode(1)):"m"===e.key||"M"===e.key?togCl(body,"light-mode"):("e"===e.key||"E"===e.key)&&togCl(body,"performance-mode")}),document.addEventListener("readystatechange",e=>"complete"===e.target.readyState&&remCl(body,"overlay")),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>e.matches?remCl(body,"light-mode"):addCl(body,"light-mode")),document.addEventListener("click",e=>{vw.w>992?actions.get(document.querySelector(".hov"))?.():actions.get(e.target)?.(),e.target!==email&&removeSelection()}),window.matchMedia("(prefers-color-scheme: light)").matches&&addCl(body,"light-mode"),document.querySelectorAll("[data-text]").forEach(e=>e.setAttribute("data-text",e.innerHTML)),detectSafari(),bindLinks(),cloneListEntries(),cloneScreen(),measureAndSize(),requestAnimationFrame(step);